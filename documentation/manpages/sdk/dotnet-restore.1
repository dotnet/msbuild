.\" Automatically generated by Pandoc 2.18
.\"
.\" Define V font for inline verbatim, using C font in formats
.\" that render this, and otherwise B font.
.ie "\f[CB]x\f[]"x" \{\
. ftr V B
. ftr VI BI
. ftr VB B
. ftr VBI BI
.\}
.el \{\
. ftr V CR
. ftr VI CI
. ftr VB CB
. ftr VBI CBI
.\}
.TH "dotnet-restore" "1" "2022-06-03" "" ".NET Documentation"
.hy
.SH dotnet restore
.PP
\f[B]This article applies to:\f[R] \[u2714]\[uFE0F] .NET Core 3.1 SDK and later versions
.SH NAME
.PP
dotnet-restore - Restores the dependencies and tools of a project.
.SH SYNOPSIS
.IP
.nf
\f[C]
dotnet restore [<ROOT>] [--configfile <FILE>] [--disable-parallel]
    [-f|--force] [--force-evaluate] [--ignore-failed-sources]
    [--interactive] [--lock-file-path <LOCK_FILE_PATH>] [--locked-mode]
    [--no-cache] [--no-dependencies] [--packages <PACKAGES_DIRECTORY>]
    [-r|--runtime <RUNTIME_IDENTIFIER>] [-s|--source <SOURCE>]
    [--use-lock-file] [-v|--verbosity <LEVEL>]

dotnet restore -h|--help
\f[R]
.fi
.SH DESCRIPTION
.PP
The \f[V]dotnet restore\f[R] command uses NuGet to restore dependencies as well as project-specific tools that are specified in the project file.
In most cases, you don\[cq]t need to explicitly use the \f[V]dotnet restore\f[R] command, since a NuGet restore is run implicitly if necessary when you run the following commands:
.IP \[bu] 2
\f[V]dotnet new\f[R]
.IP \[bu] 2
\f[V]dotnet build\f[R]
.IP \[bu] 2
\f[V]dotnet build-server\f[R]
.IP \[bu] 2
\f[V]dotnet run\f[R]
.IP \[bu] 2
\f[V]dotnet test\f[R]
.IP \[bu] 2
\f[V]dotnet publish\f[R]
.IP \[bu] 2
\f[V]dotnet pack\f[R]
.PP
Sometimes, it might be inconvenient to run the implicit NuGet restore with these commands.
For example, some automated systems, such as build systems, need to call \f[V]dotnet restore\f[R] explicitly to control when the restore occurs so that they can control network usage.
To prevent the implicit NuGet restore, you can use the \f[V]--no-restore\f[R] flag with any of these commands to disable implicit restore.
.SS Specify feeds
.PP
To restore the dependencies, NuGet needs the feeds where the packages are located.
Feeds are usually provided via the \f[I]nuget.config\f[R] configuration file.
A default configuration file is provided when the .NET SDK is installed.
To specify additional feeds, do one of the following:
.IP \[bu] 2
Create your own \f[I]nuget.config\f[R] file in the project directory.
For more information, see Common NuGet configurations and nuget.config differences later in this article.
.IP \[bu] 2
Use \f[V]dotnet nuget\f[R] commands such as \f[V]dotnet nuget add source\f[R].
.PP
You can override the \f[I]nuget.config\f[R] feeds with the \f[V]-s\f[R] option.
.PP
For information about how to use authenticated feeds, see Consuming packages from authenticated feeds.
.SS Global packages folder
.PP
For dependencies, you can specify where the restored packages are placed during the restore operation using the \f[V]--packages\f[R] argument.
If not specified, the default NuGet package cache is used, which is found in the \f[V].nuget/packages\f[R] directory in the user\[cq]s home directory on all operating systems.
For example, \f[I]/home/user1\f[R] on Linux or \f[I]C:\f[R] on Windows.
.SS Project-specific tooling
.PP
For project-specific tooling, \f[V]dotnet restore\f[R] first restores the package in which the tool is packed, and then proceeds to restore the tool\[cq]s dependencies as specified in its project file.
.SS nuget.config differences
.PP
The behavior of the \f[V]dotnet restore\f[R] command is affected by the settings in the \f[I]nuget.config\f[R] file, if present.
For example, setting the \f[V]globalPackagesFolder\f[R] in \f[I]nuget.config\f[R] places the restored NuGet packages in the specified folder.
This is an alternative to specifying the \f[V]--packages\f[R] option on the \f[V]dotnet restore\f[R] command.
For more information, see the nuget.config reference.
.PP
There are three specific settings that \f[V]dotnet restore\f[R] ignores:
.IP \[bu] 2
bindingRedirects
.RS 2
.PP
Binding redirects don\[cq]t work with \f[V]<PackageReference>\f[R] elements and .NET only supports \f[V]<PackageReference>\f[R] elements for NuGet packages.
.RE
.IP \[bu] 2
solution
.RS 2
.PP
This setting is Visual Studio specific and doesn\[cq]t apply to .NET.
\&.NET doesn\[cq]t use a \f[V]packages.config\f[R] file and instead uses \f[V]<PackageReference>\f[R] elements for NuGet packages.
.RE
.IP \[bu] 2
trustedSigners
.RS 2
.PP
Support for cross-platform package signature verification was added in the .NET 5.0.100 SDK.
.RE
.SS Workload manifest downloads
.PP
When you run this command, it initiates an asynchronous background download of advertising manifests for workloads.
If the download is still running when this command finishes, the download is stopped.
For more information, see Advertising manifests.
.SH ARGUMENTS
.IP \[bu] 2
\f[B]\f[VB]ROOT\f[B]\f[R]
.RS 2
.PP
Optional path to the project file to restore.
.RE
.SH OPTIONS
.IP \[bu] 2
\f[B]\f[VB]--configfile <FILE>\f[B]\f[R]
.RS 2
.PP
The NuGet configuration file (\f[I]nuget.config\f[R]) to use.
If specified, only the settings from this file will be used.
If not specified, the hierarchy of configuration files from the current directory will be used.
For more information, see Common NuGet Configurations.
.RE
.IP \[bu] 2
\f[B]\f[VB]--disable-parallel\f[B]\f[R]
.RS 2
.PP
Disables restoring multiple projects in parallel.
.RE
.IP \[bu] 2
\f[B]\f[VB]--force\f[B]\f[R]
.RS 2
.PP
Forces all dependencies to be resolved even if the last restore was successful.
Specifying this flag is the same as deleting the \f[I]project.assets.json\f[R] file.
.RE
.IP \[bu] 2
\f[B]\f[VB]--force-evaluate\f[B]\f[R]
.RS 2
.PP
Forces restore to reevaluate all dependencies even if a lock file already exists.
.RE
.IP \[bu] 2
\f[B]\f[VB]-?|-h|--help\f[B]\f[R]
.RS 2
.PP
Prints out a description of how to use the command.
.RE
.IP \[bu] 2
\f[B]\f[VB]--ignore-failed-sources\f[B]\f[R]
.RS 2
.PP
Only warn about failed sources if there are packages meeting the version requirement.
.RE
.IP \[bu] 2
\f[B]\f[VB]--interactive\f[B]\f[R]
.RS 2
.PP
Allows the command to stop and wait for user input or action.
For example, to complete authentication.
.RE
.IP \[bu] 2
\f[B]\f[VB]--lock-file-path <LOCK_FILE_PATH>\f[B]\f[R]
.RS 2
.PP
Output location where project lock file is written.
By default, this is \f[I]PROJECT_ROOT.lock.json\f[R].
.RE
.IP \[bu] 2
\f[B]\f[VB]--locked-mode\f[B]\f[R]
.RS 2
.PP
Don\[cq]t allow updating project lock file.
.RE
.IP \[bu] 2
\f[B]\f[VB]--no-cache\f[B]\f[R]
.RS 2
.PP
Specifies to not cache HTTP requests.
.RE
.IP \[bu] 2
\f[B]\f[VB]--no-dependencies\f[B]\f[R]
.RS 2
.PP
When restoring a project with project-to-project (P2P) references, restores the root project and not the references.
.RE
.IP \[bu] 2
\f[B]\f[VB]--packages <PACKAGES_DIRECTORY>\f[B]\f[R]
.RS 2
.PP
Specifies the directory for restored packages.
.RE
.IP \[bu] 2
\f[B]\f[VB]-r|--runtime <RUNTIME_IDENTIFIER>\f[B]\f[R]
.RS 2
.PP
Specifies a runtime for the package restore.
This is used to restore packages for runtimes not explicitly listed in the \f[V]<RuntimeIdentifiers>\f[R] tag in the \f[I].csproj\f[R] file.
For a list of Runtime Identifiers (RIDs), see the RID catalog.
Provide multiple RIDs by specifying this option multiple times.
.RE
.IP \[bu] 2
\f[B]\f[VB]-s|--source <SOURCE>\f[B]\f[R]
.RS 2
.PP
Specifies the URI of the NuGet package source to use during the restore operation.
This setting overrides all of the sources specified in the \f[I]nuget.config\f[R] files.
Multiple sources can be provided by specifying this option multiple times.
.RE
.IP \[bu] 2
\f[B]\f[VB]--use-lock-file\f[B]\f[R]
.RS 2
.PP
Enables project lock file to be generated and used with restore.
.RE
.IP \[bu] 2
\f[B]\f[VB]-v|--verbosity <LEVEL>\f[B]\f[R]
.RS 2
.PP
Sets the verbosity level of the command.
Allowed values are \f[V]q[uiet]\f[R], \f[V]m[inimal]\f[R], \f[V]n[ormal]\f[R], \f[V]d[etailed]\f[R], and \f[V]diag[nostic]\f[R].
The default is \f[V]minimal\f[R].
For more information, see <xref:Microsoft.Build.Framework.LoggerVerbosity>.
.RE
.SH EXAMPLES
.IP \[bu] 2
Restore dependencies and tools for the project in the current directory:
.RS 2
.IP
.nf
\f[C]
dotnet restore
\f[R]
.fi
.RE
.IP \[bu] 2
Restore dependencies and tools for the \f[V]app1\f[R] project found in the given path:
.RS 2
.IP
.nf
\f[C]
dotnet restore ./projects/app1/app1.csproj
\f[R]
.fi
.RE
.IP \[bu] 2
Restore the dependencies and tools for the project in the current directory using the file path provided as the source:
.RS 2
.IP
.nf
\f[C]
dotnet restore -s c:\[rs]packages\[rs]mypackages
\f[R]
.fi
.RE
.IP \[bu] 2
Restore the dependencies and tools for the project in the current directory using the two file paths provided as sources:
.RS 2
.IP
.nf
\f[C]
dotnet restore -s c:\[rs]packages\[rs]mypackages -s c:\[rs]packages\[rs]myotherpackages
\f[R]
.fi
.RE
.IP \[bu] 2
Restore dependencies and tools for the project in the current directory showing detailed output:
.RS 2
.IP
.nf
\f[C]
dotnet restore --verbosity detailed
\f[R]
.fi
.RE
